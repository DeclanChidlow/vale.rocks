<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta property="og:site_name" content="Vale Rocks" />
	<meta name="author" content="Declan Chidlow" />
	<meta property="og:locale" content="en_AU" />
	<meta property="og:url" content="https://vale.rocks" />

	<link rel="stylesheet" href="/styles/style.css">
	<link rel="alternate" type="application/rss+xml" href="https://vale.rocks/posts/feed.xml" />
	<link rel="me" href="https://fedi.vale.rocks/vale" />
	<link rel="me" href="https://github.com/DeclanChidlow" />
	<link rel="me" href="https://bsky.app/profile/vale.rocks" />

	<script type="module" src="/scripts/syntax-highlighting.js"></script>
	<script data-goatcounter="https://stats.vale.rocks/count" async src="//gc.zgo.at/count.js"></script>
<meta property="og:type" content="article" />
<meta property="article:author" content="Declan Chidlow" />

<script
	src="https://giscus.app/client.js"
	data-repo="DeclanChidlow/vale.rocks"
	data-repo-id="R_kgDOGKfOVg"
	data-category="Comments"
	data-category-id="DIC_kwDOGKfOVs4CY4vS"
	data-mapping="og:title"
	data-strict="1"
	data-reactions-enabled="1"
	data-emit-metadata="1"
	data-input-position="top"
	data-theme="transparent_dark"
	data-lang="en"
	data-loading="lazy"
	crossorigin="anonymous"
	async></script>
<style>:root{--header_background: var(--magenta)}</style>
<body>
<header id="navbar">
	<a class="skip-link" href="#main">Skip to content</a>
	<nav>
		<ul>
			<li><a href="/" id="navlanding">Vale</a></li>
			<li><a href="/posts">Posts</a></li>
			<li><a href="/portfolio">Portfolio</a></li>
		</ul>
	</nav>
</header>

<main id="main">
<span id="section">Posts</span>
<div id='fullscreenModal'><span id='close' class='icons'>close</span><img id='fullscreenImg'><p id='caption'></p><hr/><p id='altText'></p></div><script src='/scripts/view-figures.js'></script>
<head>
    <title>JPEG XL And Google's War Against It | Vale.Rocks</title>
    <meta property="og:title" content="JPEG XL And Google's War Against It"/>
    <meta name="description" content="Starting with an overview of existing image formats, including JPEG, PNG, and GIF, a look into the very promising JPEG XL and why it hasn't seen the adoption it deserves as an innovative new file format in the web landscape." />
    <meta property="og:description" content="The best format you can't use." />
    <meta property="article:published_time" content="2024-05-01" />
    <meta property="article:modified_time" content="2024-05-07" />
    <meta property="article:section" content="Essays" />
</head>
<article>
<header>
	Essay
	<h1>
		JPEG XL And Google's War Against It
	</h1>
	<ul>
		<li><time datetime="2024-05-01">01 May, 2024</time></li>
		<li>2124 words</li>
		<li>8 minute read</li>
	</ul>
</header>
<div class="readable-width">
<p>There is no doubt you’re familiar with GIFs, PNGs, and JPEGs. These image formats have been <em>the</em> way to display images on computers for decades. Chances are you see hundreds, if not thousands, of them every day while you browse the web.</p>
<p>Yet these formats aren’t quite as ubiquitous as they once were, and we’ve seen many competing standards materialise in the past few years. Perhaps most promising is JPEG XL, yet its innovation seems to go unrecognised and its adoption is stifled. But why? To get a full picture, I think it’s best we start with the advent of displaying images on computers.</p>
<h2>A Brief History</h2>
<p>Since we’ve had computers, we’ve been trying to display images on them. We started by using various text characters and symbols to bodge things together in terminals. This obviously wasn’t ideal and merely means to an end. The first actual image formats to see any real popularity included <a href="https://en.wikipedia.org/wiki/PCX">PCX</a>, <a href="https://en.wikipedia.org/wiki/Truevision_TGA">TGA</a>, <a href="https://en.wikipedia.org/wiki/PICT">PICT</a>, and <a href="https://en.wikipedia.org/wiki/BMP_file_format">BMP</a>.</p>
<p>However, these early formats were rudimentary. They largely lacked compression and weren’t widely supported. It was an era when every piece of software rolled their own format and interoperability wasn’t a priority. This was an issue, and as the need for greater compatibility grew, some proper standards formed. Of these, GIF, JPEG, and PNG are probably the best known and relevant today.</p>
<p>GIF, short for Graphics Interchange Format, is messy. It released in the ’80s, uses the simple Lempel–Ziv–Welch compression algorithm, and is limited to a palette of a meagre 256 colours. In today’s landscape, it looks pretty rough, but it’s managed to stick around thanks to its great software support and animation capabilities.</p>
<p>JPEG, also referred to as JPG and short for Joint Photographic Experts Group, came out in the early ’90s. While it does have a lossless variant, it is largely used as a lossy format. However, the degree of compression can be controlled, unlike many other formats, which allows users to select the trade off between quality and size. It’s great compression and early debut led to it becoming the most widely used format.</p>
<p>An attempt was made to supersede JPEG with the very retro futuristic sounding, but ultimately ill fated, “JPEG 2000”. It had some neat features and functionality, such as being able to compress specific sections independently, but never saw widespread adoption.</p>
<p>During the ’90s, following GIF’s widespread adoption, the Unisys Corporation, which owned the patent on the Lempel–Ziv–Welch compression algorithm used by GIFs, attempted to enforce its licensing. This ultimately led to much discourse, and a more open, improved alternative was developed. It was aptly unofficially dubbed “PNG’s Not GIF”, which, of course, abbreviates to the recursive acronym PNG, though officially, it stands for “Portable Network Graphics”. The format spread due to its free, open nature, and good support for transparency by means of an alpha layer.</p>
<p>These three standards all managed to secure footing early in the web’s life and defined themselves as <em>the</em> image formats for many years. They haven’t been perfect, but they’ve generally worked and seen great support.</p>
<h2>A New Age</h2>
<p>It isn’t all sunshine and roses for these ageing formats, though. The world has moved around them. Back when these formats were devised, computing power was a scarce resource. Many devices didn’t hold the power to compress things on the fly without performance implications, and the web was in its infancy.</p>
<p>Over the past 30 odd years, our devices, software, and knowledge of them have come a long way, yet these ageing formats still remain. That’s why, in recent years, we’ve seen a shift to new formats. Ones that aren’t limited to the compression algorithms of the ’90s, and are instead more optimised and usable in the modern age.</p>
<h3>Enter WebP</h3>
<p>In 2010, two years after the release of their Chrome browser, Google announced WebP. They proceeded to develop and refine it until its eventual stable release in 2018. The goal was simple. Make a format with the quality of a JPEG, the transparency of a PNG, and the animation of a GIF, in a small package.</p>
<p>As expected for a Google product, it very quickly gained support in Chromium, even in its unstable phase. Safari and Firefox didn’t receive full support until after its stable release, and many complaints from users stating that websites designed exclusively with Chrome in mind would fail to render the format.</p>
<p>Once all browsers received support, Google very quickly began working to snuff out other formats. They made several changes, such as updating PageSpeed Insights to suggest that sites serve images as WebP files rather than competing formats.</p>
<h3>Announcing AVIF</h3>
<p>About a year after WebP’s full introduction, a competing standard, AVIF, had its first full release. The intention was for the format to succeed WebP, and while it does implement features that aren’t present in WebP, such as HDR support, it lacks in other features, such as support for resolutions over 4K. Realistically, this places AVIF in no man’s land. It wasn’t a direct upgrade to the standards it was competing against when it released, and it certainly isn’t now.</p>
<p>One edge it does have is its use of AV1. AV1 as a video coding format already had a strong footing by the time AVIF came onto the scene. As AVIF uses the same format, just for images rather than videos, a lot of the prerequisite work a format needs to go through to see adoption had already been done.</p>
<p>Thanks to many browsers having already implemented AV1 for the purpose of video, AVIF managed to see quick adoption. In August of 2020, Chromium received support for the format, with Firefox enabling support in October of 2021 and Safari implementing support throughout 2022.</p>
<h3>Introducing JPEG XL</h3>
<p>Having been finalised in 2021, JPEG XL is a rather new format, and a good one at that. It’s created by the same group as the original JPEG and based off of <a href="https://github.com/google/pik">Google’s Pik proposal</a> and <a href="https://github.com/cloudinary/fuif">Cloudinary’s FUIF</a>.</p>
<figure class="right">
<picture>
	<source srcset="/assets/blog/JPEG_XL_And_Googles_War_Against_It/jxl_support.jxl" type="image/jxl">
	<img src="/assets/blog/JPEG_XL_And_Googles_War_Against_It/no_jxl_support.png" alt="Image stating 'Your browser supports JPEG XL' or 'Your browser doesn't support JPEG XL' depending on browser support." />
</picture>
</figure>
<p>Looking at <a href="https://en.wikipedia.org/wiki/Comparison_of_graphics_file_formats">Wikipedia’s Comparison of Graphics File Formats</a>, it’s evident that it trumps every other raster image format. Some of its many features include:</p>
<ul>
<li>Choice of lossy or lossless compression.</li>
<li>Perfectly reversible, lossless conversion from JPEG with ~20% savings.</li>
<li>~60% smaller file sizes than JPEG at the same quality when using lossy compression.</li>
<li>Negligible compression artefacts when using lossy compression.</li>
<li>Great colour gamut support, including HDR, and support for other channels.</li>
<li>Super fast encoding and decoding.</li>
<li>Support for progressive decoding.</li>
<li>Tiny file header at a mere 12 bytes.</li>
<li>Everything WebP and AVIF boasts, including transparency, animations, and such.</li>
<li>Licensed openly with no royalties.</li>
<li>Up to 32 bit depth</li>
<li>Insanely high maximum resolution up to 1,152,921,502,459 megapixels (that’s <em>over a trillion</em> pixels total).</li>
<li>Resilient against generational loss.</li>
</ul>
<p>From reading those points, you may have gathered that it does everything that could be expected of a format and does it well. Given that it excels in every context, you might expect that it’d be the de facto standard, yet, alas, it sees minimal browser support.</p>
<p>So, why were WebP and AVIF picked up so quickly when JPEG XL wasn’t? Well, as you may have surmised from the article’s title, it’s largely down to Google.</p>
<h2>Google’s Exploitation of Their Dominance</h2>
<blockquote class="markdown-alert-note">
<p>I’ll be discussing Chrome’s dominance and Google’s exploitation of it for their own gain. I’ve written about this at length in my article <a href="/blog/Everything_Is_Chrome">Everything Is Chrome</a>, which I advise you read prior to this section.</p>
</blockquote>
<p>Google has cemented itself as the single controlling force of the web. What they say goes. Google Search is the most popular search engine, and Chromium is the base for the majority of browsers. This means they control both what pages get recommended in search, and how they’re displayed in browser.</p>
<p>This leaves them with a lot of power. If they take issue with JPEG XL, then they can single handedly stop its adoption, and that’s exactly what they’ve done. At one point, Google actually did add support for JPEG XL to Chromium behind a flag. It was implemented and functional in Chromium. This prompted Firefox to add their own support.</p>
<p>However, it never made it past the opt in flag support stage, and Google eventually removed it, stating <a href="https://issues.chromium.org/issues/40168998">in the Chromium Issue Tracker</a>:</p>
<blockquote>
<p>“Thank you everyone for your comments and feedback regarding JPEG XL. We will be removing the JPEG XL code and flag from Chromium for the following reasons:</p>
<ul>
<li>Experimental flags and code should not remain indefinitely</li>
<li>There is not enough interest from the entire ecosystem to continue experimenting with JPEG XL</li>
<li>The new image format does not bring sufficient incremental benefits over existing formats to warrant enabling it by default</li>
<li>By removing the flag and the code in M110, it reduces the maintenance burden and allows us to focus on improving existing formats in Chrome“</li>
</ul>
</blockquote>
<p>This rightly caused an uproar. Users pointed out many flaws in their claims. Firstly, that there has been a huge interest in the standard from a huge number of individuals and organisations, and secondly, the innovation brought by JPEG XL was most definitely “sufficient incremental benefits”, especially as they had recently accepted AVIF, which was more lacking in features than existing standards.</p>
<p>What this really translates to is, “We’ve created WebP, a competing standard, and want to kill anything that might genuinely compete with it”. This would also partly explain why they adopted AVIF but not JPEG XL. AVIF wasn’t superior in every way and, as such, didn’t threaten to dethrone WebP.</p>
<p>JPEG XL, however, <strong>is</strong> better than WebP in every quantifiable way and would obsolete it. AVIF also serves as something to point to should they be called out for stifling competition and innovation as they are. They can simply say, “We love other formats. Look, we added another one just the other year”.</p>
<p>Interestingly, Firefox, which receives a pretty decent amount of funding from Google, quietly dropped focus on implementing JPEG XL support and now state that they are “neutral” on the matter, although the flag is still present in the nightly version of the browser. Safari, which is developed by Apple separately from Google, managed to implement JPEG XL support with no issues, and it’s available in WebKit without limitation.</p>
<p>Many forks of Chromium and Firefox also include support with no ill effect. Firefox based browsers can simply enable the flag, and Chromium based browsers can use the implementation prior to removal as a jumping off point.</p>
<p>Some of the forks with support include <a href="https://thorium.rocks">Thorium</a>, <a href="https://www.waterfox.net">Waterfox</a>, and <a href="https://www.palemoon.org">Pale Moon</a>. The code is written and working, and both use external implementations, so the cited “maintenance burden” is more or less nonexistent. Even if it does turn out to be a huge burden, <a href="https://lunduke.locals.com/post/4387539/firefox-money-investigating-the-bizarre-finances-of-mozilla">they can take the hit</a>.</p>
<h3>Why WebP?</h3>
<p>So, Google sabotaged JPEG XL in favour of their own format, WebP. The question is, <em>why?</em> Well, I think that’s pretty clear. Google wants complete control, and JPEG XL could take that away from them. They already have unrivalled control over the web, so why not expand that just a bit more?</p>
<p>Should Google decide they need to make some alterations to the format to benefit themselves, there is next to nothing standing in their way. They’ve got control over the standard and can make tweaks if needed. Especially the sort of business minded tweaks that are employed to better align with stakeholder interests.</p>
<p>Google could also stop supporting the format outside their products and services, leading to them faltering and falling out of compatibility. This could lead to fragmentation and compatibility issues in non-Google software, potentially pushing users to move to Google’s offerings where support is offered.</p>
<h2>Taking Action</h2>
<p>It may seem futile, but I believe that if we raise awareness of the issue and put enough public pressure on Google and, to a lesser extent, Mozilla, they will reconsider their stance. Use browsers that support the format, or toggle on the flag if possible. Spruik the benefits of the format wherever you can attract attention, and start using it in the <a href="https://jpegxl.info/why-jxl#software_support">various software that already supports it</a>. The more demand, the more adoption.</p>
<p>This is an effort that is worth fighting for. Google has trampled innovation far too many times in the pursuit of control for us to allow them to do it again. We must condemn this behaviour and fight these monopolistic practices at every turn to prevent stifling progress in the name of corporate control.</p>
<hr />
<p>If you liked this article, then do consider sharing it, both for my own benefit and to raise awareness. Also, if you’d like to see me produce more content like this, then consider <a href="/donate">sending me a tip</a>. It’d mean a lot.</p>
<details>
<summary>Sources</summary>
<ul>
<li><a href="https://issues.chromium.org/issues/40168998">JPEG XL decoding support (image/jxl) in blink (tracking bug) [40168998] - Chromium</a> | Accessed: 23/04/2024</li>
<li><a href="https://people.apache.org/~jim/NewArchitect/webrevu/1997/05_09/designers/05_09_97_1">Web Review: PNG’s NOT GIF!</a> | Accessed: 01/05/2024</li>
<li><a href="https://caniuse.com/?search=jpeg%20webp">“jpeg webp” | Can I use… Support tables for HTML5, CSS3, etc</a></li>
<li><a href="https://jpegxl.info">JPEG XL</a>| Accessed: 24/04/2024</li>
<li><a href="https://jpeg.org/jpegxl">JPEG - JPEG XL</a> | Accessed: 23/04/2024</li>
<li><a href="https://ds.jpeg.org/whitepapers/jpeg-xl-whitepaper.pdf">JPEG XL White Paper 2.0 - jpeg-xl-whitepaper.pdf</a> | Accessed: 28/04/2024</li>
<li><a href="https://cloudinary.com/blog/how_jpeg_xl_compares_to_other_image_codecs">How JPEG XL Compares to Other Image Codecs</a> | Accessed: 23/04/2024</li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1539075">Open Bug 1539075 (JPEG-XL) Implement support for JPEG XL (image/jxl)</a> | Accessed: 23/04/2024</li>
</ul>
</details>
<section class="giscus"></section>
</div>
</article>

</main>

<footer>
	<div id="socials">
		<a href="https://fedi.vale.rocks/vale" target="_blank" title="Fediverse">
			<img src="/assets/icons/ActivityPub.svg" alt="Fediverse" />
		</a>
		<a href="https://github.com/DeclanChidlow" target="_blank" title="GitHub">
			<img src="/assets/icons/GitHub.svg" alt="GitHub" />
		</a>
		<a href="https://bsky.app/profile/vale.rocks" target="_blank" title="Bluesky">
			<img src="/assets/icons/Bluesky.svg" alt="Bluesky" />
		</a>
		<a href="https://unsplash.com/@outervale" target="_blank" title="Unsplash">
			<img src="/assets/icons/Unsplash.svg" alt="Unsplash" />
		</a>
		<a href="https://www.linkedin.com/in/declan-chidlow" target="_blank" title="LinkedIn">
			<img src="/assets/icons/LinkedIn.svg" alt="LinkedIn" />
		</a>
	</div>
	<div id="pages">
		<a href="/contact">Contact</a>
		<a href="/services">Services</a>
		<a href="/support">Support</a>
		<a href="/blog/feed.rss">RSS</a>
	</div>
	<div id="copyright">
		© Declan Chidlow | 2019 -
		<script>
			document.write(new Date().getFullYear());
		</script>
		<noscript>Present</noscript>
	</div>
</footer>

</body>
</html>